
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monte Carlo Percolation Simulation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            color: #333;
            padding: 20px;
        }
        h1 {
            color: #2e8b57;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        input {
            padding: 8px;
            margin-bottom: 15px;
            width: 100%;
            max-width: 300px;
        }
        button {
            background-color: #4caf50;
            color: white;
            padding: 10px 15px;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        h2 {
            margin-top: 20px;
            color: #d2691e;
        }
    </style>
    <script>
        function simulatePercolation() {
            const X = parseInt(document.getElementById('columns').value);
            const Y = parseInt(document.getElementById('cells').value);
            const P = parseFloat(document.getElementById('probability').value);
            const N = parseInt(document.getElementById('cycles').value);
            let successCount = 0;

            for (let i = 0; i < N; i++) {
                const grid = Array.from({ length: X }, () => Array.from({ length: Y }, () => Math.random() < P));
                if (percolates(grid, X, Y)) {
                    successCount++;
                }
            }

            const result = (successCount / N) * 100; // Convert to percentage
            document.getElementById('result').innerText = `Probability of system water passing: ${result.toFixed(2)}%`;
            calculateColumnProbability(X, Y, P);
        }

        function percolates(grid, X, Y) {
            const visited = Array.from({ length: X }, () => Array(Y).fill(false));
            const queue = [];

            for (let i = 0; i < X; i++) {
                if (grid[i][0]) {
                    queue.push([i, 0]);
                    visited[i][0] = true;
                }
            }

            while (queue.length > 0) {
                const [x, y] = queue.shift();
                if (y === Y - 1) return true;

                const directions = [[1, 0], [-1, 0], [0, 1], [0, -1]];
                for (const [dx, dy] of directions) {
                    const nx = x + dx;
                    const ny = y + dy;
                    if (nx >= 0 && nx < X && ny >= 0 && ny < Y && grid[nx][ny] && !visited[nx][ny]) {
                        visited[nx][ny] = true;
                        queue.push([nx, ny]);
                    }
                }
            }
            return false;
        }

        function calculateColumnProbability(X, Y, P) {
            // Correct formula for probability of columns water passing
            const probability = 1 - Math.pow((1 - P), (Y * X));
            document.getElementById('columnResult').innerText = `Probability of columns water passing: ${(probability * 100).toFixed(2)}%`;
        }
    </script>
</head>
<body>
    <h1>Monte Carlo Percolation Simulation</h1>
    <label for="columns">Number of columns (X):</label>
    <input type="number" id="columns" required>
    
    <label for="cells">Number of cells in each column (Y):</label>
    <input type="number" id="cells" required>
    
    <label for="probability">Probability of cell's water passing:</label>
    <input type="number" step="0.01" id="probability" required>
    
    <label for="cycles">Number of cycles (N):</label>
    <input type="number" id="cycles" required>
    
    <button onclick="simulatePercolation()">Simulate</button>
    
    <h2 id="result">Probability of system water passing will be displayed here.</h2>
    <h2 id="columnResult">Probability of columns water passing will be displayed here.</h2>
</body>
</html>
